# V8AddInLibrary
Компонента для работы с ИКС фискальными аппаратами.
Для работы необходимо зарегистрировать
RegAsm.exe V8AddInLibrary.dll /codebase
В 1с сделать следующее
ПодключитьВнешнююКомпоненту("AddIn.FiscalICSComponent");
ОбъектКомпоненты = Новый("AddIn.FiscalRegistrator");

ОбъектКомпоненты.ПодключитьсяКФР(1,"MG-08");
	СтрокаСтатуса = ОбъектКомпоненты.ПолучитьСтатус();
	Статус = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПолучитьСтатус());
	//Если Статус.infoStatus.ПревышениеПродолжительностиСмены тогда // необходимо делать Z отчет
	//	СтатусZ = ВернутьСтруктуруJSON(ОбъектКомпоненты.ZОтчет());
	//КонецЕсли;
	//СтатусУстановкиКассира = ВернутьСтруктуруJSON(ОбъектКомпоненты.УстановитьКассира("Кассир#1"));
	//
	Если Статус.ОткрытЧек тогда // Проверка на открытый чек
		ОбъектКомпоненты.АннулироватьЧек();
	КонецЕсли;
	СтатусZ = ВернутьСтруктуруJSON(ОбъектКомпоненты.ZОтчет());
	return;
	////
	//СтатусУстановкиНадписиСверху = ВернутьСтруктуруJSON(ОбъектКомпоненты.УстановитьВверхнююНадписьНаТабло("Вверх!"));
	//СтатусУстановкиНадписиСнизу = ВернутьСтруктуруJSON(ОбъектКомпоненты.УстановитьНижнююНадписьНаТабло("Низ?"));
	//
	//СтатусБумаги = ВернутьСтруктуруJSON(ОбъектКомпоненты.СтатусБумаги());
	
	//СтруктураПериодическогоОтчета = Новый Структура;
	//СтруктураПериодическогоОтчета.Вставить("ДатаНачала",НачалоМесяца(ТекущаяДата()));
	//СтруктураПериодическогоОтчета.Вставить("ДатаОкончания",ТекущаяДата());
	//СтатусПериодическогоОтчета = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПереодическийОтчет(СтрокаВJSON(СтруктураПериодическогоОтчета)));
	
	//СтруктураПериодическогоОтчета = Новый Структура;
	//СтруктураПериодическогоОтчета.Вставить("ДатаНачала",НачалоМесяца(ТекущаяДата()));
	//СтруктураПериодическогоОтчета.Вставить("ДатаОкончания",ТекущаяДата());
	//СтатусПериодическогоОтчета = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПереодическийОтчетКороткий(СтрокаВJSON(СтруктураПериодическогоОтчета)));
	
	//СтруктураПериодическогоОтчета2 = Новый Структура;
	//СтруктураПериодическогоОтчета2.Вставить("НачальныйНомер",0);
	//СтруктураПериодическогоОтчета2.Вставить("ПоследнийНомер",5);
	//СтатусПериодическогоОтчета2 = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПереодическийОтчет2(СтрокаВJSON(СтруктураПериодическогоОтчета2)));
	
	//СтатусПереключенияOnline = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПереключитьOnline()); // Печатать чек сразу или после окончательной команды
	//
	//СтатусВнесения = ВернутьСтруктуруJSON(ОбъектКомпоненты.СуммаСлужебногоВнесения(30000));
	//СтатусИзьятия = ВернутьСтруктуруJSON(ОбъектКомпоненты.СуммаСлужебнойВыдачи(30000));
	//
	//СтатусОткрытияЯщика = ВернутьСтруктуруJSON(ОбъектКомпоненты.ОткрытьЯщик(200));
	//
	//Если Статус.ОткрытЧек тогда // Проверка на открытый чек
	//	ОбъектКомпоненты.АннулироватьЧек();
	//КонецЕсли;
	
	//ОбъектКомпоненты.ПечатьНулевойЧек();
	
	//статусХ =  ВернутьСтруктуруJSON(ОбъектКомпоненты.ПечатьXОтчета());
	//СтатусZ = ВернутьСтруктуруJSON(ОбъектКомпоненты.ZОтчет());
	
	//СтатусПечатистроки = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПечататьСтроку(1, 0, true, 670, 2, false, "БатХл8Дор400г", 464));
	//СтатусОплаты = ВернутьСтруктуруJSON(ОбъектКомпоненты.Оплатить(3, 7000, false, true));
	//СтруктураСтрокиЧека = Новый Структура;
	//СтруктураСтрокиЧека.Вставить("Количество",1);
	//СтруктураСтрокиЧека.Вставить("ЧислоДесятичныхРазрядов",0);
	//СтруктураСтрокиЧека.Вставить("НеПечататьКоличество",истина);	
	//СтруктураСтрокиЧека.Вставить("Цена",670);
	//СтруктураСтрокиЧека.Вставить("НалоговаяГруппа",2); //0=A,1=B,2=C,3=D,4=E,5=F
	//СтруктураСтрокиЧека.Вставить("НазваниеТовара","БатХл8Дор400г");
	//СтруктураСтрокиЧека.Вставить("КодТовара",464);
	//СтруктураСтрокиЧека.Вставить("ПечатьШтрихКода",ложь);
	//СтатусПечатистроки = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПечататьСтрокуJSON(СтрокаВJSON(СтруктураСтрокиЧека)));
	//
	//СтруктураДисконтаПоСтроке = Новый Структура;
	//СтруктураДисконтаПоСтроке.Вставить("ТипДисконта",1);    //0 -  процентная скидка/наценка на последний товар;   
	/////           1 – абсолютная скидка/наценка на последний товар;   
	/////           2 - процентная скидка/наценка на промежуточную сумму;  
	/////            3 – абсолютная скидка/наценка на промежуточную сумму
	//СтруктураДисконтаПоСтроке.Вставить("ЗначениеДисконта",5); //в копейках
	//СтруктураДисконтаПоСтроке.Вставить("Комментарий","По товару");
	//СтатусДисконта = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПечатьСкидки(СтрокаВJSON(СтруктураДисконтаПоСтроке)));
	//
	//
	//СтруктураКомментария = Новый Структура;
	//СтруктураКомментария.Вставить("СтрокаКомментария","Комментарий");
	//СтруктураКомментария.Вставить("ОткрытиеЧекаВыплаты",Ложь); //Если необходим чек выплаты то ставим истина
	//ОбъектКомпоненты.ПечатьКомментарий(СтрокаВJSON(СтруктураКомментария));
	//
	//
	//СтруктураДисконтаПоОбщая = Новый Структура;
	//СтруктураДисконтаПоОбщая.Вставить("ТипДисконта",3);    //0 -  процентная скидка/наценка на последний товар;   
	/////           1 – абсолютная скидка/наценка на последний товар;   
	/////           2 - процентная скидка/наценка на промежуточную сумму;  
	/////            3 – абсолютная скидка/наценка на промежуточную сумму
	//СтруктураДисконтаПоОбщая.Вставить("ЗначениеДисконта",10); //в копейках
	//СтруктураДисконтаПоОбщая.Вставить("Комментарий","По общая");
	//СтатусДисконтаОбщий = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПечатьСкидки(СтрокаВJSON(СтруктураДисконтаПоОбщая)));
	//
	//
	////СтруктураИтогоПоЧеку = ВернутьСтруктуруJSON(ОбъектКомпоненты.ПолучитьСуммуПоЧеку());
	//
	//
	//
	//СтруктураОплаты = Новый Структура;
	//СтруктураОплаты.Вставить("ТипОплаты",0); //Карткой=0, Наличкой=3, Кредит=1, Чек=2
	//СтруктураОплаты.Вставить("Оплата",100);
	//СтруктураОплаты.Вставить("АвтоматическоеЗакрытие",Ложь);
	//СтруктураОплаты.Вставить("ФискальныйЧек",Истина);
	//СтатусОплатыСтроки = ВернутьСтруктуруJSON(ОбъектКомпоненты.ОплатитьJSON(СтрокаВJSON(СтруктураОплаты)));	
	//
	//СтруктураОплаты = Новый Структура;
	//СтруктураОплаты.Вставить("ТипОплаты",3); //Карткой=0, Наличкой=3, Кредит=1, Чек=2
	//СтруктураОплаты.Вставить("Оплата",800);
	//СтруктураОплаты.Вставить("АвтоматическоеЗакрытие",Ложь);
	//СтруктураОплаты.Вставить("ФискальныйЧек",Истина);
	//СтатусОплатыСтроки = ВернутьСтруктуруJSON(ОбъектКомпоненты.ОплатитьJSON(СтрокаВJSON(СтруктураОплаты)));	
	//
	//ОбъектКомпоненты.КопияЧека();

	//
	//РаспечататьВозврат();
	//Остаток = ОбъектКомпоненты.СуммаНаличныхВДенежномЯщике(); // Сумма в денежном ящике
	
	ОбъектКомпоненты.ОтключитьсяОтФР();
